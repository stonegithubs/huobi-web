webpackJsonp([1],{"+BTi":function(t,e){},"/I4U":function(t,e){},"/bpg":function(t,e){},"15bi":function(t,e){},"2rGO":function(t,e){},"8z31":function(t,e){},"991W":function(t,e){},C9oz:function(t,e){},DSCY:function(t,e){},GXEp:function(t,e){},HGMW:function(t,e){},I4nB:function(t,e){},InqU:function(t,e){},IxJZ:function(t,e){},M0o5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("/I4U"),n("+BTi");var s,r,a,i,o,u,c,l,d,h,p=n("yg6k"),f=n.n(p),m=(n("2rGO"),n("nu7/")),v=n.n(m),b=(n("/bpg"),n("ACGT")),y=n.n(b),_=(n("bwiK"),n("SExR")),g=n.n(_),k=(n("DSCY"),n("LaeV")),w=n.n(k),S=(n("IxJZ"),n("NoPp")),x=n.n(S),C=(n("8z31"),n("SXzR")),j=n.n(C),D=(n("I4nB"),n("STLj")),L=n.n(D),O=(n("cDSy"),n("e0Bm")),P=n.n(O),T=(n("X+ky"),n("HJMx")),F=n.n(T),V=(n("Yq4J"),n("qubY")),A=n.n(V),q=(n("Q6SQ"),n("LQMI")),H=n.n(q),E=(n("GXEp"),n("mtrD")),z=n.n(E),I=n("7+uW"),M=n("mvHQ"),B=n.n(M),N=n("Xxa5"),U=n.n(N),R=n("exGp"),$=n.n(R),W=n("mw3O"),K=n.n(W),X=n("mtWM"),J={API_HOST:"http://182.61.43.233:3000",wsHost:"182.61.43.233:3000",API_HUOBI_HOST:"https://api.huobi.br.com"},G=n.n(X).a.create({baseURL:J.API_HOST,timeout:3e4,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){return"application/x-www-form-urlencoded"===e["Content-Type"]&&"[object Object]"===Object.prototype.toString(t)?K.a.stringify(t):t}]}),Y=(s=$()(U.a.mark(function t(e,n,s){var r,a;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=J.API_HOST+"/api/huobi/v1/get_kline?"+K.a.stringify({symbol:e,period:n,size:s}),t.prev=1,t.next=4,G.get(r);case 4:if(200!==(a=t.sent).status&&"ok"!==a.data.status){t.next=7;break}return t.abrupt("return",a.data);case 7:throw{tip:"error",response:a,data:{},url:r};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t,e,n){return s.apply(this,arguments)}),Q=(r=$()(U.a.mark(function t(e,n){var s,r;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=J.API_HOST+"/api/huobi/v1/market/depth?"+K.a.stringify({symbol:e,type:n,AccessKeyId:"2f0f54a2-8e5d9137-982b01e1-5789d"}),t.prev=2,t.next=5,G.get(s);case 5:if(200!==(r=t.sent).status||"ok"!==r.data.status){t.next=8;break}return t.abrupt("return",r.data.data);case 8:throw{tip:"error",response:r,data:{},url:s};case 12:throw t.prev=12,t.t0=t.catch(2),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,12]])})),function(t,e){return r.apply(this,arguments)}),Z=(a=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HUOBI_HOST+"/market/detail/merged?"+K.a.stringify({symbol:e}),t.prev=1,t.next=4,G.get(n);case 4:if(200!==(s=t.sent).status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),i=$()(U.a.mark(function t(){var e,n;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=J.API_HUOBI_HOST+"/v1/common/symbols",void 0===localStorage.symbols){t.next=3;break}return t.abrupt("return",JSON.parse(localStorage.symbols));case 3:return t.prev=3,t.next=6,G.get(e);case 6:if(200!==(n=t.sent).status||"ok"!==n.data.status){t.next=10;break}return localStorage.symbols=B()(n.data.data),t.abrupt("return",n.data.data);case 10:throw{tip:"error",response:n,data:{},url:e};case 14:throw t.prev=14,t.t0=t.catch(3),t.t0;case 17:case"end":return t.stop()}},t,this,[[3,14]])})),function(){return i.apply(this,arguments)}),tt=(o=$()(U.a.mark(function t(e,n){var s,r,a;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:return s=t.sent,r=0,a=0,s.some(function(t){return t["base-currency"]===e&&t["quote-currency"]===n&&(r=t["price-precision"],a=t["amount-precision"],!0)}),t.abrupt("return",{pricePrecision:r,amountPrecision:a});case 7:case"end":return t.stop()}},t,this)})),u=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/huobi/v1/limit",t.prev=1,t.next=4,G.post(n,e);case 4:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t){return u.apply(this,arguments)}),et=(c=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/huobi/v1/cancelOrder",t.prev=1,t.next=4,G.post(n,{orderId:e});case 4:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t){return c.apply(this,arguments)}),nt=(l=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/huobi/v1/openOrders?"+K.a.stringify(e),t.prev=2,t.next=5,G.get(n);case 5:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=8;break}return t.abrupt("return",s.data);case 8:throw{tip:"error",response:s,data:{},url:n};case 12:throw t.prev=12,t.t0=t.catch(2),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,12]])})),function(t){return l.apply(this,arguments)}),st=(d=$()(U.a.mark(function t(){var e,n;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=J.API_HOST+"/api/huobi/v1/get_balance",t.prev=1,t.next=4,G.get(e);case 4:if(200!==(n=t.sent).status||"ok"!==n.data.status){t.next=7;break}return t.abrupt("return",n.data.data);case 7:throw{tip:"error",response:n,data:{},url:e};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(){return d.apply(this,arguments)}),rt=(h=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/huobi/v1/get_order?orderId="+e,t.prev=1,t.next=4,G.get(n);case 4:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),n("//Fk"),n("woOf")),at=n.n(rt),it=n("NYxO"),ot=n("bOdI"),ut={state:{tick:{asks:[],bids:[]},trade:{},asksList:[],bidsList:[],aksFirst:[],bidsFirst:[],responseSymbol:"",lastKline:{},WS_HUOBI_STATUS:{},WS_SERVER_STATUS:{}},getters:{useWSAble:function(t){return"ok"===t.WS_HUOBI_STATUS.status&&"ok"===t.WS_SERVER_STATUS.status}},actions:{},mutations:n.n(ot)()({updateHuobiState:function(t,e){var n=!1,s="store > huobi > state";if("string"!=typeof e.stateKey||""===e.stateKey.trim())throw Error("stateKey must be a String inclusion in the  "+s);for(var r in t)if(r===e.stateKey){n=!0;break}if(!n)throw Error(e.stateKey+"不存在"+s+"中");t[e.stateKey]=e.data}},"UPTATE_DEPTH",function(t,e){t.tick=e.tick,t.asksList=e.asksList,t.bidsList=e.bidsList,t.aksFirst=e.aksFirst,t.bidsFirst=e.bidsFirst,t.responseSymbol=e.responseSymbol})};I.default.use(it.a);var ct=new it.a.Store({modules:{huobi:ut},strict:!1}),lt={quoteCurrency:"usdt",pricePrecision:4,amountPrecision:2,sortBy:"sumMoneny",minSumPrice:200,minPrice:1e3};var dt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,s=void 0===n?"":n,r=e.pricePrecision,a=void 0===r?lt.pricePrecision:r,i=e.amountPrecision,o=void 0===i?lt.amountPrecision:i,u=e.quoteCurrency,c=void 0===u?lt.quoteCurrency:u,l={},d=0;d<t.length;d++){var h=t[d][1];void 0!==l[h]?(l[h].count+=1,l[h].prices.push(t[d][0])):(l[h]={},l[h].count=1,l[h].prices=[t[d][0]])}var p=[];for(var f in l){var m=l[f].prices,v=0;v=1===m.length?l[f].prices[0]:m.reduce(function(t,e){return t+e})/m.length;var b=l[f].count,y=b*f,_=y*v,g=_;if("btc"===c?g=_*window.btcPrice:"eth"===c&&(g=_*window.ethPrice),b>1&&g>lt.minSumPrice||g>lt.minPrice){var k={count:b,amount:Number(f).toFixed(o),sumCount:y.toFixed(o),sumMoneny:_.toFixed(2),sumDollar:g.toFixed(2),price:v.toFixed(a),prices:l[f].prices};p.push(k)}}return"asks"===s&&"price"===lt.sortBy?p.sort(function(t,e){return t[lt.sortBy]-e[lt.sortBy]}):p.sort(function(t,e){return e[lt.sortBy]-t[lt.sortBy]})};dt.setConfig=function(t){at()(lt,t)};var ht=dt,pt=function(t){var e={usdt:1,btc:window.btcPrice,eth:window.ethPrice},n=void 0;for(var s in e)if(t.endsWith(s)){n=e[s];break}return n},ft=null,mt={symbol:"btcusdt",set:function(t){at()(J,t)}},vt=function(t){(ft=new WebSocket("ws://"+J.wsHost+"/huobi")).onmessage=bt,ft.onclose=yt,ft.onerror=_t};vt();function bt(t){var e=JSON.parse(t.data);Date.now();if("WS_HUOBI"===e.form)if("depth"===e.type&&e.symbol===mt.symbol){var n=e.data,s=n.bids1,r=n.bidsList,a=n.aks1,i=n.asksList;ct.commit("UPTATE_DEPTH",{asksList:i,bidsList:r,bidsFirst:s,aksFirst:a,responseSymbol:e.symbol,tick:n.tick})}else e.kline&&e.symbol===mt.symbol?ct.commit("updateHuobiState",{stateKey:"lastKline",data:e.kline}):e.trade&&e.symbol===mt.symbol&&ct.commit("updateHuobiState",{stateKey:"trade",data:e.trade});e.status&&ct.commit("updateHuobiState",{stateKey:"WS_HUOBI_STATUS",data:{type:e.type,status:e.status,msg:e.msg}})}function yt(){console.log("ws.close"),ct.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:"close"}})}function _t(t){console.error(t),ct.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:t}})}var gt=ft,kt={name:"App",components:{},data:function(){return{activeIndex:"charts"}},created:function(){this.activeIndex=this.$router.history.current.name.toLowerCase(),window.ethPrice=466,window.btcPrice=8e3},mounted:function(){Y("ethusdt","1min",2).then(function(t){window.ethPrice=t.data[1].close}),Y("btcusdt","1min",2).then(function(t){window.btcPrice=t.data[1].close}),vt()},beforeDestroy:function(){this.$notify({title:"WS状态",message:"msg: ws_server closed",duration:3e3}),gt.close()},methods:{handleClick:function(t,e){},handleSelect:function(){}}},wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"charts"}},[t._v("Charts")]),t._v(" "),n("el-menu-item",{attrs:{index:"depth"}},[t._v("Depth")]),t._v(" "),n("el-menu-item",{attrs:{index:"difference"}},[t._v("Difference")]),t._v(" "),n("el-menu-item",{attrs:{index:"density"}},[t._v("Density")]),t._v(" "),n("el-menu-item",{attrs:{index:"trade"}},[t._v("Trade")])],1),t._v(" "),n("keep-alive",[n("router-view",{staticClass:"page-content"})],1)],1)},staticRenderFns:[]};var St=n("VU/8")(kt,wt,!1,function(t){n("yaM1")},null,null).exports,xt=n("/ocq"),Ct=n("Dd8w"),jt=n.n(Ct),Dt=n("PJh5"),Lt=n.n(Dt),Ot=(n("R3sX"),n("b7ct")),Pt=n.n(Ot),Tt=n("ifQC"),Ft=n.n(Tt),Vt=n("F21L"),At=n.n(Vt),qt=["#03C087","#EF5555"],Ht=["#006633","#990000",qt[0],qt[1],"#3399FF"],Et=function(){var t=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/chart/amount?"+K.a.stringify({symbol:e}),t.prev=1,t.next=4,G.get(n);case 4:if(200!==(s=t.sent).status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),zt=function(){var t=$()(U.a.mark(function t(e){var n,s;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.API_HOST+"/api/chart/trade?"+K.a.stringify({symbol:e}),t.prev=1,t.next=4,G.get(n);case 4:if(200!==(s=t.sent).status){t.next=7;break}return t.abrupt("return",s.data);case 7:throw{tip:"error",response:s,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),It={name:"AmoutChart",components:{},data:function(){return{loading:!0}},props:{data:Array},mounted:function(){var t,e,n;!function(t,e){e.dataSet||(e.dataSet=new Ft.a({state:{sourceData:t,start:Date.now()-1e3,end:Date.now()}}));e.dataView||(e.dataView=e.dataSet.createView({}));e.dataView.source(e.dataSet.state.sourceData).transform({type:"fold",fields:["bids_max_1","asks_max_1","buy_1","sell_1"],key:"type",value:"value",retains:["time","price"]}),e.dataView.transform({type:"filter",callback:function(t){var n=new Date(t.time).getTime();return n>=e.dataSet.state.start&&n<=e.dataSet.state.end}}),e.dataView}([],this),this.chart=(t=this.$refs.container,e=this,(n=new Pt.a.Chart({container:t,height:500,forceFit:!0,padding:[50,50,80,120]})).source(e.dataView,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),n.axis("value",{label:{formatter:function(t){return t/1e4+"万usdt ("+parseInt(t/btcPrice)+"฿) "}}}),n.tooltip({crosshairs:{type:"line"}}),n.line().position("time*value").color("type",Ht),n.legend({position:"top-right"}),n.render(),e.slider=new At.a({container:e.$refs.slider,width:"auto",height:26,padding:[0,100,0,120],start:e.dataSet.state.start,end:e.dataSet.state.end,xAxis:"time",yAxis:"value",scales:{time:{type:"time",tickCount:100,mask:"M/DD H:mm:ss"}},data:e.dataView,backgroundChart:{type:"line"},onChange:function(t){var n=t.startValue,s=t.endValue;e.dataSet.setState("start",n),e.dataSet.setState("end",s)}}),e.slider.render(),n),this.getData()},methods:{getData:function(){var t=this;Et("btcusdt").then(function(e){if(t.chart){var n=e.data;return t.dataSet.setState("start",new Date(n[0].time).getTime()),t.dataSet.setState("end",new Date(n[n.length-1].time).getTime()),t.dataSet.setState("sourceData",n),t.slider.start=new Date(n[parseInt(n.length/2)].time).getTime(),t.slider.end=t.dataSet.state.end,t.dataView.source(t.dataSet.state.sourceData),void t.slider.changeData(t.dataView)}}).finally(function(){t.loading=!1})}}};var Mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],ref:"container",staticClass:"charts-container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("挂单资金")])])}]};var Bt=n("VU/8")(It,Mt,!1,function(t){n("Oogg")},null,null).exports,Nt={name:"LineCharts",data:function(){return{}},props:{},mounted:function(){this.getData()},methods:{getData:function(){var t=this;zt("btcusdt").then(function(e){var n,s,r;(console.log(e.data.length),t.chart)?t.chart.changeData(Ut(e.data,t)):(Ut(e.data,t),t.chart=(n=t.$refs.container,s=t,(r=new Pt.a.Chart({container:n,height:500,forceFit:!0,padding:[50,50,80,120]})).source(s.dataView,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss"}}),r.axis("value",{label:{formatter:function(t){return t/1e4+"万usdt ("+parseInt(t/btcPrice)+"฿) "}}}),r.tooltip({crosshairs:{type:"line"}}),r.intervalStack().position("time*value").color("type",Ht),r.render(),new At.a({container:s.$refs.slider,width:"auto",height:26,padding:[0,120,0,120],start:s.dataSet.state.start,end:s.dataSet.state.end,xAxis:"time",yAxis:"value",scales:{time:{type:"time",tickCount:100,mask:"M/DD H:mm:ss"}},data:s.dataView,backgroundChart:{type:"line"},onChange:function(t){var e=t.startValue,n=t.endValue;s.dataSet.setState("start",e),s.dataSet.setState("end",n)}}).render(),r))}).finally(function(){})}}};function Ut(t,e){return e.dataSet||(e.dataSet=new Ft.a({state:{start:new Date(t[parseInt(t.length/2)].time).getTime(),end:new Date(t[t.length-1].time).getTime()}})),e.dataView||(e.dataView=e.dataSet.createView()),e.dataView.source(t).transform({type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["buy","sell","time"]}),e.dataView.transform({type:"filter",callback:function(t){var n=new Date(t.time).getTime();return n>=e.dataSet.state.start&&n<=e.dataSet.state.end}}),e.dataView}var Rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{ref:"container",staticClass:"charts-container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("资金流入流出")])])}]};var $t=n("VU/8")(Nt,Rt,!1,function(t){n("do3+")},null,null).exports,Wt={name:"LineCharts",data:function(){return{}},props:{data:{type:Array,default:function(){return[]}}},watch:{data:function(t){this.renderChart(t,"watch")}},mounted:function(){this.renderChart(this.data)},methods:{renderChart:function(t){if(this.chart)return this.dataSet.setState("sourceData",t),void this.dataView.source(this.dataSet.state.sourceData);var e,n,s;this.dataView=function(t,e){e.dataSet||(e.dataSet=new Ft.a({state:{sourceData:t}}));e.dataView||(e.dataView=e.dataSet.createView({watchingStates:["sourceData"]}));return e.dataView.source(e.dataSet.state.sourceData).transform({type:"aggregate",fields:["buy","sell"],operations:["sum","sum"],as:["流入","流出"]}),e.dataView.transform({type:"fold",fields:["流入","流出"],key:"type",value:"sum"}),e.dataView.transform({type:"percent",field:"sum",dimension:"type",as:"percent"}),e.dataView}(t,this),this.chart=(e=this.$refs.container,n=this,(s=new Pt.a.Chart({container:e,height:220,width:220,forceFit:!0})).source(n.dataView,{sum:{formatter:function(t){return parseInt(t/1e4)+"万"}}}),s.coord("theta"),s.tooltip({showTitle:!1}),s.intervalStack().position("percent").color("type",qt).label("sum",{offset:-30,textStyle:{rotate:0,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}).tooltip("type*sum",function(t,e){return{name:t,value:e=parseInt(e/1e4)+"万$"}}).style({lineWidth:1,stroke:"#fff"}),s.legend(!1),s.render(),s)}}};var Kt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-pai-chart"},[e("div",{ref:"container"})])},staticRenderFns:[]};var Xt={name:"LineCharts",components:{TradePieChart:n("VU/8")(Wt,Kt,!1,function(t){n("15bi"),n("M0o5")},"data-v-2edb3dd7",null).exports},data:function(){return{loading:!0,data:[]}},props:{},mounted:function(){var t,e,n;!function(t,e){e.dataSet||(e.dataSet=new Ft.a({state:{sourceData:t,start:Date.now()-1e3,end:Date.now()}}));e.dataView||(e.dataView=e.dataSet.createView());e.dataView.source(t).transform({type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["time"]}),e.dataView.transform({type:"filter",callback:function(t){var n=new Date(t.time).getTime();return n>=e.dataSet.state.start&&n<=e.dataSet.state.end}}),e.dataView}([],this),this.chart=(t=this.$refs.container,e=this,(n=new Pt.a.Chart({container:t,height:500,forceFit:!0,padding:[50,50,80,120]})).source(e.dataView,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),n.axis("value",{label:{formatter:function(t){return t/1e4+"万usdt ("+parseInt(t/btcPrice)+"฿) "}}}),n.tooltip({crosshairs:{type:"line"}}),n.intervalStack().position("time*value").color("type",qt),n.legend({position:"top-right",offsetY:-20}),n.render(),e.slider=new At.a({container:e.$refs.slider,width:"auto",height:26,padding:[0,100,0,120],start:e.dataSet.state.start,end:e.dataSet.state.end,xAxis:"time",yAxis:"value",scales:{time:{type:"time",tickCount:100,mask:"M/DD H:mm:ss"}},data:e.dataView,backgroundChart:{type:"interval"},onChange:function(t){var n=t.startValue,s=t.endValue;e.dataSet.setState("start",n),e.dataSet.setState("end",s)}}),e.slider.render(),n),this.getData()},methods:{getData:function(){var t=this;zt("btcusdt").then(function(e){t.data=e.data,t.chart&&(t.dataSet.setState("sourceData",e.data),t.dataSet.setState("start",new Date(e.data[0].time).getTime()),t.dataSet.setState("end",new Date(e.data[e.data.length-1].time).getTime()),t.slider.start=new Date(e.data[parseInt(e.data.length-10)].time).getTime(),t.slider.end=t.dataSet.state.end,t.dataView.source(t.dataSet.state.sourceData),t.slider.changeData(t.dataView))}).finally(function(){t.loading=!1})}}};var Jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-chart"},[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],ref:"container",staticClass:"charts-container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"}),this._v(" "),e("TradePieChart",{attrs:{data:this.data}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("资金流入流出")])])}]};var Gt={name:"Charts",components:{LineChart:Bt,LineChart2:$t,TradeBarChart:n("VU/8")(Xt,Jt,!1,function(t){n("HGMW")},null,null).exports},data:function(){return{}},computed:jt()({},Object(it.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol},trade:function(t){return t.huobi.trade}})),created:function(){},mounted:function(){this.$el.style.maxHeight=window.innerHeight-61+"px"},beforeDestroy:function(){},methods:{}},Yt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-page"},[n("el-card",{staticClass:"chart-wrap"},[n("LineChart",{attrs:{asksList:t.asksList,bidsList:t.bidsList,aksFirst:t.aksFirst,bidsFirst:t.bidsFirst,symbol:t.responseSymbol}})],1),t._v(" "),n("el-card",{staticClass:"chart-wrap"},[n("TradeBarChart",{attrs:{trade:t.trade,symbol:t.responseSymbol}})],1)],1)},staticRenderFns:[]};var Qt=n("VU/8")(Gt,Yt,!1,function(t){n("VvSS")},null,null).exports,Zt={name:"Table",data:function(){return{itemPrices:[],dialogVisible:!1}},props:{data:{type:Array,default:function(){return[]}},quoteCurrency:String},mounted:function(){},methods:{showAllPrices:function(t){this.dialogVisible=!0,this.itemPrices=t}}},te={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              amount\n              ")]),t._v(" "),n("th",[t._v("\n              sumCount\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              $($/k)\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(e.sumCount))]),t._v(" "),n("td",[t._v(t._s(e.sumMoneny))]),t._v(" "),n("td",[t._v(t._s((e.sumDollar/1e3).toFixed(3)))]),t._v(" "),n("td",[n("span",[t._v(t._s(e.price))]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){t.showAllPrices(e.prices)}}},[t._v("\n                  查看全部\n              ")])],1)])}))]),t._v(" "),n("el-dialog",{attrs:{title:"全部价格",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("ul",{staticClass:"all-price-list"},t._l(t.itemPrices,function(e){return n("li",{key:e},[t._v(t._s(e))])})),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var ee={name:"Depth",components:{Table:n("VU/8")(Zt,te,!1,function(t){n("C9oz")},null,null).exports},data:function(){return{quoteCurrency:"usdt",symbol:"btc",symbol2:"usdt",symbols:"",sortByValue:"sumMoneny",subscribeLoading:!1,subscribeDisable:!0}},computed:jt()({},Object(it.c)({status:function(t){return t.huobi.WS_HUOBI_STATUS},bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(it.b)(["useWSAble"])),watch:{bidsList:function(t){},status:function(t){this.$notify({title:"WS状态",message:"msg: "+B()(t.msg),duration:3e3})},useWSAble:function(t){}},created:function(){var t=this;gt.onopen=function(){t.$notify({title:"WS状态",message:"msg: ws_server open",duration:3e3}),t.$store.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"ok",msg:"open"}})}},mounted:function(){this.$refs.tickList.style.maxHeight=window.innerHeight-150+"px",console.log(1)},beforeDestroy:function(){},methods:{reset:function(){var t;t={type:"ws-huobi",value:"reset"},ft.send(B()(t))},subscribeDepth:function(){var t=$()(U.a.mark(function t(){var e;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.subscribeLoading=!0,e=this.symbol+this.symbol2,this.symbols=e,this.quoteCurrency="$","eth"===this.symbol2?this.quoteCurrency="ETH":"btc"===this.symbol2&&(this.quoteCurrency="BTC"),mt.set({symbol:this.symbols}),this.$store.commit("UPTATE_DEPTH",{tick:{asks:[],bids:[]},asksList:[],bidsList:[],bidsFirst:[],aksFirst:[],responseSymbol:""}),this.subscribeLoading=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),sortBy:function(){}}},ne={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入内容",size:"small",clearable:"",disabled:!0},model:{value:t.symbol,callback:function(e){t.symbol=e},expression:"symbol"}}),t._v("\n    对\n    "),n("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:!0},model:{value:t.symbol2,callback:function(e){t.symbol2=e},expression:"symbol2"}},[n("el-option",{attrs:{value:"usdt"}},[t._v("usdt")]),t._v(" "),n("el-option",{attrs:{value:"btc"}},[t._v("btc")]),t._v(" "),n("el-option",{attrs:{value:"eth"}},[t._v("eth")])],1),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.subscribeLoading,disabled:t.subscribeDisable,size:"small"},on:{click:t.subscribeDepth}},[t._v("查挂单\n    ")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.sortBy},model:{value:t.sortByValue,callback:function(e){t.sortByValue=e},expression:"sortByValue"}},[n("el-option",{attrs:{value:"sumMoneny"}},[t._v("按sumMoneny排序")]),t._v(" "),n("el-option",{attrs:{value:"price"}},[t._v("按price排序")])],1),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small",disabled:!0},on:{click:t.reset}},[t._v("重启ws\n    ")]),t._v(" "),n("div",[n("span",[t._v("当前价"+t._s(t.lastKline.close))])]),t._v(" "),n("div",{ref:"tickList",staticClass:"tickList"},[n("div",{staticClass:"flex-row "},[n("div",{staticClass:"flex-1"},[n("span",[t._v("买单("+t._s(t.bidsList.length)+")")]),t._v(" "),n("span",[t._v("买1:"+t._s(t.bidsFirst))]),t._v(" "),n("Table",{attrs:{data:t.bidsList,quoteCurrency:t.quoteCurrency}})],1),t._v(" "),n("div",{staticClass:"flex-1"},[n("span",[t._v("卖单("+t._s(t.asksList.length)+")")]),t._v(" "),n("span",[t._v("卖1:"+t._s(t.aksFirst))]),t._v(" "),n("Table",{attrs:{data:t.asksList,quoteCurrency:t.quoteCurrency}})],1)])])],1)])},staticRenderFns:[]};var se=n("VU/8")(ee,ne,!1,function(t){n("soLk")},null,null).exports,re={name:"Difference",components:{},data:function(){return{list:[],isLoading:!1,orderByProperty:"tickDis"}},created:function(){},mounted:function(){this.$refs.tickList.style.maxHeight=window.innerHeight-50+"px",this.seachAble=!0},beforeDestroy:function(){},methods:{start:function(){this.getAllDetail()},getAllDetail:function(){var t=$()(U.a.mark(function t(){var e,n,s,r,a,i,o,u,c,l,d,h,p,f,m,v,b,y,_=this;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0===this.list.length?this.list:[],this.isLoading=!0,t.next=4,Z();case 4:n=t.sent,s=n.filter(function(t){return"usdt"===t["quote-currency"]||"btc"===t["quote-currency"]}),r=0;case 7:if(!(r<s.length)){t.next=42;break}return a=s[r],void 0,void 0,i=a["base-currency"]+a["quote-currency"],o=void 0,t.prev=12,t.next=15,Q(i,"step0");case 15:o=t.sent,t.next=23;break;case 18:return t.prev=18,t.t0=t.catch(12),this.isLoading=!1,console.error(t.t0),t.abrupt("continue",39);case 23:if(u=o.tick.bids,c=o.tick.asks,l=ht(u,{pricePrecision:a["price-precision"],amountPrecision:a["amount-precision"],quoteCurrency:a["quote-currency"],type:"bids"}),d=ht(c,{pricePrecision:a["price-precision"],amountPrecision:a["amount-precision"],quoteCurrency:a["quote-currency"],type:"asks"}),h=1,p=1,l.length&&d.length){t.next=31;break}return t.abrupt("continue",39);case 31:l.length>1?h=(Number(l[0].sumMoneny)+Number(l[1].sumMoneny))/2:1===l.length&&(h=Number(l[0].sumMoneny)),d.length>1?p=(Number(d[0].sumMoneny)+Number(d[1].sumMoneny))/2:1===d.length&&(p=Number(d[0].sumMoneny)),f=h/p,m=l[0].sumDollar,v=d[0].sumDollar,b=l.sort(function(t,e){return e.count-t.count}),y=d.sort(function(t,e){return e.count-t.count}),e.push({symbol:i,tickDis:f.toFixed(3),maxCountDis:(b[0].count/y[0].count).toFixed(3),lengthDis:(l.length/d.length).toFixed(3),buy1Money:m,sell1Money:v});case 39:r++,t.next=7;break;case 42:if(e!==this.list&&(this.list.length=0,this.list=e),this.isLoading=!1,this.orderBy(),this.seachAble){t.next=47;break}return t.abrupt("return");case 47:setTimeout(function(){_.start()},2e3);case 48:case"end":return t.stop()}},t,this,[[12,18]])}));return function(){return t.apply(this,arguments)}}(),orderBy:function(){var t=this;this.list.sort(function(e,n){return n[t.orderByProperty]-e[t.orderByProperty]})},stopSearch:function(){this.seachAble=!1}}},ae={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("el-button",{attrs:{type:"primary",loading:t.isLoading,size:"small"},on:{click:t.start}},[t._v("开始")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.orderByProperty,callback:function(e){t.orderByProperty=e},expression:"orderByProperty"}},[n("el-option",{attrs:{value:"tickDis"}},[t._v("买一/卖一(总价格)")]),t._v(" "),n("el-option",{attrs:{value:"maxCountDis"}},[t._v("买单数(max)/卖单数(max)")]),t._v(" "),n("el-option",{attrs:{value:"lengthDis"}},[t._v("buyCount / sellCount")]),t._v(" "),n("el-option",{attrs:{value:"buy1Money"}},[t._v("买一总价($)")]),t._v(" "),n("el-option",{attrs:{value:"sell1Money"}},[t._v("卖一总价($)")])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.orderBy}},[t._v("排序")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.stopSearch}},[t._v("中断自动查询")])],1),t._v(" "),n("div",{ref:"tickList",staticStyle:{overflow:"auto"}},[n("div",[n("table",[t._m(0),t._v(" "),n("tbody",t._l(t.list,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.tickDis))]),t._v(" "),n("td",[t._v(t._s(e.maxCountDis))]),t._v(" "),n("td",[t._v(t._s(e.lengthDis))]),t._v(" "),n("td",[t._v(t._s((e.buy1Money/1e3).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s((e.sell1Money/1e3).toFixed(2)))])])}))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("\n                  Symbols\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一/卖一(价格)\n                  ")]),t._v(" "),n("th",[t._v("\n                  买单数(max)/卖单数(max)\n                  ")]),t._v(" "),n("th",[t._v("\n                  buyCount / sellCount\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一总价($/k)\n                  ")]),t._v(" "),n("th",[t._v("\n                  卖一总价($/k)\n                  ")])])])}]};var ie=n("VU/8")(re,ae,!1,function(t){n("uMta")},null,null).exports,oe=function(t,e){var n="number"==typeof t?t:Date.parse(t),s=setInterval(function(){Date.now()>n&&(e&&e(),clearInterval(s))},1e3)};function ue(t){return JSON.parse(B()(t)).slice(0,10).sort(function(t,e){return Number(t.price)-Number(e.price)})}var ce=function(t){var e,n,s=t.bidsList,r=t.asksList,a=t.buyCount,i=t.sellCount,o=(t.preSame,ue(s)),u=ue(r);if(!(o.length<=2)){for(var c=0,l=0,d=[],h=o.length>u.length?u.length:o.length,p=0;p<h/2;p++)d.push({buyPrice:o[p].price,sellPrice:u[h-p-1].price});o.forEach(function(t){c+=Number(t.price)}),u.forEach(function(t){l+=Number(t.price)}),e=c/o.length,n=l/u.length;o.length;var f=Math.round(o.length/2)+a;console.log(o),u.length>5?i:1;var m=Math.round(u.length/2)-i;return console.log(u),{buyPrice:o[f]?o[f].price:o[0].price,sellPrice:u[m]?u[m].price:u[0].price,asksAvg:n,bindsAvg:e,bak:d}}},le=n("8k4B"),de=!1,he={name:"Market",components:{},data:function(){return{list:[],symbol:"pai",amount:"",price:"",type:"buy-limit",buttonLoading:!1,openOrders:[],quoteCurrency:"btc",amountPrecision:4,testPrice:10,buyCount:3,sellCount:3}},computed:jt()({},Object(it.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},responseSymbol:function(t){return t.huobi.responseSymbol}})),created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{trade:function(){var t=this;return this.buttonLoading=!0,console.log(this.type.search("buy")),tt({symbol:this.symbol+this.quoteCurrency,amount:this.amount,price:this.price,type:this.type,action:this.type.indexOf("buy")>-1?"buy":"sell"}).then(function(e){"ok"===e.status&&void 0!==e.data?t.$notify({title:"下单状态",message:"msg: 下单成功",duration:3e3}):t.$notify({title:"下单状态",message:"msg: "+e["err-code"],duration:3e3}),t.getOpenOrders()}).finally(function(){t.buttonLoading=!1})},autoTrade:function(){var t=$()(U.a.mark(function t(){var e,n,s,r,a,i,o,u,c,l,d,h,p,f=this;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.symbol+this.quoteCurrency===this.responseSymbol){t.next=2;break}return t.abrupt("return");case 2:return this.buttonLoading=!0,e=null,t.prev=4,t.next=7,st();case 7:e=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),this.autoTrade();case 13:if(n="",s="",null!==e){t.next=19;break}throw this.buttonLoading=!1,this.autoTrade(),Error("balanceList没有查到");case 19:return e.list.forEach(function(t){t.currency===f.quoteCurrency&&"trade"===t.type&&(n=Number(t.balance)),t.currency===f.symbol&&"trade"===t.type&&(s=Number(t.balance))}),t.next=22,Y(this.symbol+this.quoteCurrency,"1min",2);case 22:if(null!==(r=t.sent).data){t.next=26;break}return this.buttonLoading=!1,t.abrupt("return");case 26:return a=r.data[0].close,i=n/a,o={buyCount:0,sellCount:0},t.next=31,this.getOpenOrders();case 31:if(this.openOrders.forEach(function(t){"buy-limit"===t.type?o.buyCount++:o.sellCount++}),u=this.testPrice,c=(c="usdt"===this.quoteCurrency?u/a:u/window.btcPrice/a).toFixed(this.amountPrecision),l=ce({bidsList:this.bidsList,asksList:this.asksList,buyCount:this.buyCount-o.buyCount,sellCount:this.sellCount-o.sellCount}),console.log(l),d={},h=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){void 0===d[t.price]?d[t.price]=1:h=t}),null===h){t.next=51;break}return de=!0,p=h.type.indexOf("buy")>-1?"buy":"sell",this.buyCount=l.bak.length,this.sellCount=l.bak.length,t.next=47,this.cancelOrder(h.id);case 47:return t.next=49,tt({symbol:this.symbol+this.quoteCurrency,amount:h.amount,price:l.bak[le(0,l.bak.length-1)]["buy"===p?"buyPrice":"sellPrice"],type:h.type,action:p});case 49:return t.next=51,this.getOpenOrders();case 51:if(t.prev=51,!(i>c&&o.buyCount<this.buyCount)){t.next=57;break}return t.next=55,tt({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.buyPrice,type:"buy-limit",action:"buy",preSame:de});case 55:return t.next=57,this.getOpenOrders();case 57:if(!(s>c&&o.sellCount<this.sellCount)){t.next=62;break}return t.next=60,tt({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.sellPrice,type:"sell-limit",action:"sell",preSame:de});case 60:return t.next=62,this.getOpenOrders();case 62:t.next=67;break;case 64:t.prev=64,t.t1=t.catch(51),this.autoTrade();case 67:this.buttonLoading=!1,setTimeout(function(){f.checkOrder()},2e4);case 69:case"end":return t.stop()}},t,this,[[4,10],[51,64]])}));return function(){return t.apply(this,arguments)}}(),checkOrder:function(){var t=$()(U.a.mark(function t(){var e,n,s,r,a,i,o,u=this;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t,e){return Math.abs(t-Number(e))/e},t.next=3,this.getOpenOrders();case 3:if(Array.isArray(this.openOrders)&&0!==this.openOrders.length&&this.symbol+this.quoteCurrency===this.responseSymbol){t.next=5;break}return t.abrupt("return");case 5:if(e=ce({bidsList:this.bidsList,asksList:this.asksList,buyCount:1,sellCount:1}),n=null,s=null,r=null,this.openOrders.sort(function(t,e){return Number(e.price)-Number(t.price)}),a={},i=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){"buy-limit"===t.type?(null===n&&(n=t),r=t):"sell-limit"===t.type&&null===s&&(s=t),void 0===a[t.price]?a[t.price]=1:i=t}),null===i){t.next=19;break}return de=!0,t.next=17,this.cancelOrder(i.id);case 17:t.next=20;break;case 19:de=!1;case 20:if(!(null!==n&&o(e.bindsAvg,n.price)>.04)){t.next=23;break}return t.next=23,this.cancelOrder(n.id);case 23:if(!(null!==r&&n!==r&&o(e.bindsAvg,r.price)>.04)){t.next=26;break}return t.next=26,this.cancelOrder(r.id);case 26:if(!(null!==s&&o(e.asksAvg,s.price)>.04)){t.next=29;break}return t.next=29,this.cancelOrder(s.id);case 29:setTimeout(function(){u.autoTrade()},2e4);case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOpenOrders:function(){var t=$()(U.a.mark(function t(e){var n,s,r,a=this;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.buttonLoading=!0,t.next=3,Z();case 3:return n=t.sent,s=0,r=0,n.some(function(t){return t["base-currency"]===a.symbol&&t["quote-currency"]===a.quoteCurrency&&(s=t["price-precision"],r=t["amount-precision"],a.amountPrecision=r,!0)}),t.abrupt("return",nt({symbol:this.symbol+this.quoteCurrency,side:"buy"}).then(function(t){Array.isArray(t.data)?(t.data.forEach(function(t){t["created-at"]=Lt()(t["created-at"]).format("YYYY/MM/DD h:mm:ss"),t.amount=Number(t.amount).toFixed(r),t.price=Number(t.price).toFixed(s),t["field-amount"]=Number(t["field-amount"]).toFixed(r)}),a.openOrders=t.data):a.openOrders=[]}).finally(function(){a.buttonLoading=!1}));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),cancelOrder:function(t){var e=this;return this.buttonLoading=!0,et(t).then(function(t){e.getOpenOrders(),e.buttonLoading=!1})},timeoutBuy:function(){var t=$()(U.a.mark(function t(){var e=this;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:oe("2018-07-25T15:00:00",function(){e.trade()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},pe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"market"},[n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n                       时间\n                       ")]),t._v(" "),n("th",[t._v("\n                       交易对\n                       ")]),t._v(" "),n("th",[t._v("\n                       方向\n                       ")]),t._v(" "),n("th",[t._v("\n                       价格("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       数量 ("+t._s(t.symbol)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       委托总额("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       已成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       未成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       操作\n                       ")])])]),t._v(" "),n("tbody",t._l(t.openOrders,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e["created-at"]))]),t._v(" "),n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.type))]),t._v(" "),n("td",[t._v(t._s(e.price))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(Number(e.amount*e.price).toFixed(t.amountPrecision)))]),t._v(" "),n("td",[t._v(t._s(e["field-amount"]))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[n("el-button",{attrs:{size:"small"},on:{click:function(n){t.cancelOrder(e.id)}}},[t._v("\n                           撤单\n                       ")])],1)])}))])])])},staticRenderFns:[]};var fe=n("VU/8")(he,pe,!1,function(t){n("ZiL4")},null,null).exports,me=function(t){for(var e=t.asksList,n=t.bidsList,s=t.currentPrice,r=t.symbol,a={},i={},o=JSON.parse(B()(e)),u=JSON.parse(B()(n)),c=pt(r),l=.001;l<.4;l+=.001){var d=s*(1-(l=Number(l.toFixed(6)))),h=s*(1+l);a[-l]={count:0,price:d,sumMoneny:0},i[l]={count:0,price:h,sumMoneny:0};t:for(var p=0;p<o.length;p++){var f=o[p][0];if(h<Number(f))break t;i[l].count++,i[l].sumMoneny+=o[p][1]*f*c,o.splice(l,1),p--}t:for(var m=0;m<u.length;m++){var v=u[m][0];if(d>Number(v))break t;a[-l].count++,a[-l].sumMoneny+=u[m][1]*v*c,u.splice(l,1),m--}}return{buy:a,sell:i}},ve={name:"Table",data:function(){return{}},props:{data:{type:Object,default:function(){return{}}},quoteCurrency:String},mounted:function(){},methods:{}},be={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              %\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s((100*s).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s(e.price.toString().length>10?e.price.toFixed(8):e.price))]),t._v(" "),n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(parseInt(e.sumMoneny)))])])}))])])},staticRenderFns:[]};var ye={name:"Density",components:{DensityTable:n("VU/8")(ve,be,!1,function(t){n("InqU")},null,null).exports},data:function(){return{buyDensityList:{},sellDensityList:{}}},computed:jt()({},Object(it.c)({tick:function(t){return t.huobi.tick},bidsFirst:function(t){return t.huobi.bidsFirst},aksFirst:function(t){return t.huobi.aksFirst},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(it.b)(["useWSAble"]),{quoteCurrency:function(){return this.responseSymbol?this.responseSymbol.endsWith("btc")?"btc":this.responseSymbol.endsWith("eth")?"eth":void 0:"usdt"}}),watch:{tick:function(){var t=me({asksList:this.tick.asks,bidsList:this.tick.bids,currentPrice:this.lastKline.close,symbol:this.responseSymbol});this.buyDensityList=t.buy,this.sellDensityList=t.sell}},created:function(){},mounted:function(){this.$refs.tickList.style.maxHeight=window.innerHeight-50+"px"},beforeDestroy:function(){},methods:{}},_e={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"tickList",staticClass:"tickList"},[e("div",{staticClass:"flex-row container"},[e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.buyDensityList,quoteCurrency:this.quoteCurrency}})],1),this._v(" "),e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.sellDensityList,quoteCurrency:this.quoteCurrency}})],1)])])])},staticRenderFns:[]};var ge=n("VU/8")(ye,_e,!1,function(t){n("jTER")},null,null).exports;I.default.use(xt.a);var ke=new xt.a({mode:"history",routes:[{path:"/",name:"Home",component:Qt,meta:{keepAlive:!0}},{path:"/charts",name:"Charts",component:Qt,meta:{keepAlive:!0}},{path:"/depth",name:"Depth",component:se},{path:"/difference",name:"Difference",component:ie,meta:{keepAlive:!0}},{path:"/trade",name:"Trade",component:fe,meta:{keepAlive:!0}},{path:"/density",name:"Density",component:ge,meta:{keepAlive:!0}}]});n("991W"),n("erWL");I.default.config.productionTip=!1,I.default.use(z.a),I.default.use(H.a),I.default.use(A.a),I.default.use(F.a),I.default.use(P.a),I.default.use(L.a),I.default.use(j.a),I.default.use(x.a),I.default.use(w.a),I.default.use(g.a),I.default.use(y.a),I.default.use(v.a.directive),I.default.prototype.$loading=v.a.service,I.default.prototype.$notify=f.a,new I.default({el:"#app",router:ke,store:ct,components:{App:St},template:"<App/>"})},Oogg:function(t,e){},Q6SQ:function(t,e){},VvSS:function(t,e){},"X+ky":function(t,e){},Yq4J:function(t,e){},ZiL4:function(t,e){},bwiK:function(t,e){},cDSy:function(t,e){},"do3+":function(t,e){},erWL:function(t,e){},jTER:function(t,e){},soLk:function(t,e){},uMta:function(t,e){},uslO:function(t,e,n){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function r(t){return n(a(t))}function a(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(s)},r.resolve=a,t.exports=r,r.id="uslO"},yaM1:function(t,e){}},["NHnr"]);